<!DOCTYPE html>
<html>
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
      <!-- Material Design Font...Ref to...http://google.github.io/material-design-icons/ -->
      <!-- Library to...https://design.google.com/icons/ -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700" rel="stylesheet">
    <link href="BlogApi.css" rel="stylesheet">  
    </head>
    <body>
    	 <!-- Start advertize -->
	     <div class="myAdsense">
	      	<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
			<!-- AdUnit_Response -->
			<ins class="adsbygoogle"
				 style="display:block"
				 data-ad-client="ca-pub-7142837732503760"
				 data-ad-slot="3572434972"
				 data-ad-format="auto"></ins>
			<script>
			(adsbygoogle = window.adsbygoogle || []).push({});
			</script>
	     </div>
	     <!-- End advertize -->    
        <div id='subject'><h3>Blogger API Study</h3>
        </div>
        <div><a href="https://developers.google.com/api-client-library/javascript/dev/dev_jscript">
            <h4><i class="material-icons">face</i>API Client Library for javascript</h4>
            </a><p>
        	<a href="https://developers.google.com/apis-explorer/?hl=ko#p/blogger/v3/">
        	<h4><i class="material-icons">face</i>Blogger v3 Api</h4>
        	</a><p>
        </div>
        <div><i class="material-icons">list</i>리스트:
              <div id='list'></div>
        </div>
        <div><i class="material-icons">view_quilt</i>내용:
              <div id='content'></div>
        </div>
        <script>
            function init_Blogger() {
            	//ApiKey from(key for browser)
            	//https://console.developers.google.com/apis/credentials?project=api-project-795298509012
            	gapi.client.setApiKey('AIzaSyCcypAQkF80650jb9RpjpqBnGsvBVbjeOE');
            	//BlogId from...
            	//https://www.blogger.com/blogger.g?blogID=6527004784334721145#overview/src=dashboard
            	var BlogId='6527004784334721145';
                gapi.client.load('blogger','v3').then(makeRequest);
				console.log('blogger loaded...');
            }
            function makeRequest() {
            	//Equal to: 
            	//GET https://www.googleapis.com/blogger/v3/blogs/blogId/posts
            	//GET https://www.googleapis.com/blogger/v3/blogs/6527004784334721145/posts
            	var request = gapi.client.blogger.posts.list({
                    'blogId': '6527004784334721145'
                    //'fields': 'items(content,title,updated,id)'
                  });
                  request.then(function(response) {
                    console.log('Response: ' + response.result.items[0]);
                    var tableformat;
                    tableformat = '<table><tr><th>Subject</th><th>Id</th></tr>';
                    for (var i = 0; i < response.result.items.length; i++) {
                    	tableformat += '<tr><td>' + response.result.items[i].title 
                    	             + '</td><td>' + response.result.items[i].id 
                    	             + '</td></tr>';
                    }
                    document.getElementById('list').innerHTML = tableformat + '</table>';
                  }, function(reason) {
                    console.log('Error: ' + reason.result.error.message);
                  });
                  makeOnePostReq();
            }
            function makeOnePostReq() {
            	var request=gapi.client.blogger.posts.get(
            			{
            				'blogId':'6527004784334721145',
            				'postId':'6039095133011298653'
            			});
            	request.then(function(response){
            		document.getElementById('content').innerHTML 
            		= '<pre style="background-color:lightgrey;">' + response.result.content + '</pre>';
            	}, function(reason) {
            		console.log('Error a post: ' + reason.result.toString());
            	});
            }
        </script>
        <script src="https://apis.google.com/js/client.js?onload=init_Blogger">
        </script>
    <div id="todos">
    Next...
    Publish BlogApi.html to see how it works.
    Think about ApiKey to Auth
    Think about doamin consume the API(Blogger API)
    </div>
    </body>
</html>